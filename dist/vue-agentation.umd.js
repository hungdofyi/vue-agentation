(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VueAgentation={},d.Vue))})(this,(function(d,e){"use strict";const de=["aria-label"],ue={class:"agentation-popup__header"},me={class:"agentation-popup__header-content"},fe={class:"agentation-popup__header-title"},pe={key:0,class:"agentation-popup__header-selected"},ge={class:"agentation-popup__body"},he={key:0,style:{"margin-top":"0.5rem"}},ye={key:0,class:"agentation-popup__styles-pre"},ke={class:"agentation-popup__footer"},be={class:"agentation-popup__actions"},R=e.defineComponent({__name:"AnnotationPopup",props:{element:{},x:{},y:{},selectedText:{},initialValue:{default:""},submitLabel:{default:"Add"},accentColor:{default:"#3b82f6"},dark:{type:Boolean,default:!1},computedStyles:{}},emits:["submit","cancel"],setup(t,{expose:n,emit:o}){const a=o,i=e.ref(t.initialValue),c=e.ref(null),p=e.ref(!1),w=e.ref(!1),h=e.ref("initial"),$=e.computed(()=>{let x=t.x,C=t.y+20;return typeof window<"u"&&(x+320>window.innerWidth-16&&(x=window.innerWidth-320-16),x<16&&(x=16),C+200>window.innerHeight-16&&(C=t.y-200-10),C<16&&(C=16)),{left:`${x}px`,top:`${C}px`}});function s(){const g=i.value.trim();if(!g){E();return}a("submit",g)}function u(){h.value="exit",setTimeout(()=>{a("cancel")},150)}function E(){p.value=!0,setTimeout(()=>{p.value=!1},500)}function b(g){g.key==="Enter"&&(g.metaKey||g.ctrlKey)?(g.preventDefault(),s()):g.key==="Escape"&&(g.preventDefault(),u())}e.onMounted(()=>{h.value="enter",e.nextTick(()=>{var g;h.value="entered",(g=c.value)==null||g.focus()})});function y(g){g.key==="Escape"&&u()}return e.onMounted(()=>{document.addEventListener("keydown",y)}),e.onUnmounted(()=>{document.removeEventListener("keydown",y)}),n({shake:E}),(g,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["agentation-popup",[t.dark?"agentation-popup--dark":"",p.value&&"agentation-animate-shake",h.value==="initial"&&"agentation-popup--entering",h.value==="enter"&&"agentation-popup--entering",h.value==="entered"&&"agentation-popup--entered",h.value==="exit"&&"agentation-popup--exiting"]]),style:e.normalizeStyle($.value),"data-agentation-ignore":"",role:"dialog","aria-modal":"true","aria-label":`Add annotation for ${t.element}`},[e.createElementVNode("div",ue,[e.createElementVNode("div",me,[e.createElementVNode("div",{class:"agentation-popup__header-dot",style:e.normalizeStyle({backgroundColor:t.accentColor})},null,4),e.createElementVNode("span",fe,e.toDisplayString(t.element),1)]),t.selectedText?(e.openBlock(),e.createElementBlock("p",pe,' "'+e.toDisplayString(t.selectedText)+'" ',1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",ge,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"textareaRef",ref:c,"onUpdate:modelValue":l[0]||(l[0]=m=>i.value=m),class:"agentation-popup__textarea",placeholder:"Add your comment...",onKeydown:b},null,544),[[e.vModelText,i.value]]),t.computedStyles?(e.openBlock(),e.createElementBlock("div",he,[e.createElementVNode("button",{type:"button",class:"agentation-popup__styles-toggle",onClick:l[1]||(l[1]=m=>w.value=!w.value)},[(e.openBlock(),e.createElementBlock("svg",{class:e.normalizeClass(["agentation-popup__styles-icon",w.value&&"agentation-popup__styles-icon--open"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[2]||(l[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),l[3]||(l[3]=e.createTextVNode(" Computed styles ",-1))]),w.value?(e.openBlock(),e.createElementBlock("pre",ye,e.toDisplayString(t.computedStyles),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",ke,[l[4]||(l[4]=e.createElementVNode("span",{class:"agentation-popup__shortcut"},[e.createElementVNode("kbd",{class:"agentation-popup__kbd"},"âŒ˜"),e.createTextVNode(" + "),e.createElementVNode("kbd",{class:"agentation-popup__kbd"},"Enter"),e.createTextVNode(" to submit ")],-1)),e.createElementVNode("div",be,[e.createElementVNode("button",{type:"button",class:"agentation-popup__btn agentation-popup__btn--cancel",onClick:u}," Cancel "),e.createElementVNode("button",{type:"button",class:"agentation-popup__btn agentation-popup__btn--submit",style:e.normalizeStyle({backgroundColor:t.accentColor}),onClick:s},e.toDisplayString(t.submitLabel),5)])])],14,de))}}),we={class:"agentation-marker__tooltip-header"},xe={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ee={class:"agentation-marker__tooltip-title"},Ce={class:"agentation-marker__tooltip-path"},$e={class:"agentation-marker__tooltip-body"},Se={class:"agentation-marker__tooltip-comment"},Ae={key:0,class:"agentation-marker__tooltip-selected-text"},Ne={class:"agentation-marker__tooltip-footer"},M=((t,n)=>{const o=t.__vccOpts||t;for(const[a,i]of n)o[a]=i;return o})(e.defineComponent({__name:"AnnotationMarker",props:{annotation:{},index:{},dark:{type:Boolean,default:!1},accentColor:{default:"#3b82f6"},isHovered:{type:Boolean,default:!1}},emits:["click","delete","mouseenter","mouseleave"],setup(t,{emit:n}){const o=n,a=e.ref(!1),i=e.ref("initial"),c=e.computed(()=>{const u={left:`${t.annotation.x}%`};return t.annotation.isFixed?u.top=`${t.annotation.y}px`:u.top=`${t.annotation.y}px`,u}),p=e.computed(()=>t.annotation.x>70?"left":"right");function w(u){u.stopPropagation(),o("click",t.annotation)}function h(u){u.stopPropagation(),i.value="exit",setTimeout(()=>{o("delete",t.annotation)},200)}function $(){a.value=!0,o("mouseenter",t.annotation)}function s(){a.value=!1,o("mouseleave",t.annotation)}return e.onMounted(()=>{i.value="enter",requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.value="entered"})})}),(u,E)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["agentation-marker",[t.annotation.isFixed?"agentation-marker--fixed":"agentation-marker--absolute",i.value==="initial"&&"agentation-marker--entering",i.value==="enter"&&"agentation-marker--entering",i.value==="entered"&&"agentation-marker--entered",i.value==="exit"&&"agentation-marker--exiting"]]),style:e.normalizeStyle(c.value),"data-agentation-ignore":"",onMouseenter:$,onMouseleave:s,onClick:w},[e.createElementVNode("div",{class:e.normalizeClass(["agentation-marker__dot",[t.isHovered&&"agentation-marker__dot--hovered"]]),style:e.normalizeStyle({backgroundColor:t.accentColor})},[e.createTextVNode(e.toDisplayString(t.index+1)+" ",1),e.createElementVNode("div",{class:"agentation-marker__ping agentation-animate-ping",style:e.normalizeStyle({backgroundColor:t.accentColor})},null,4)],6),e.createVNode(e.Transition,{"enter-active-class":"agentation-transition-enter-active","enter-from-class":"agentation-transition-enter","enter-to-class":"agentation-transition-enter-to","leave-active-class":"agentation-transition-leave-active","leave-from-class":"agentation-transition-leave","leave-to-class":"agentation-transition-leave-to"},{default:e.withCtx(()=>[a.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["agentation-marker__tooltip",[t.dark?"agentation-marker__tooltip--dark":"",p.value==="left"?"agentation-marker__tooltip--left":"agentation-marker__tooltip--right"]]),onClick:E[0]||(E[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",we,[e.createElementVNode("div",xe,[e.createElementVNode("span",Ee,e.toDisplayString(t.annotation.element),1),e.createElementVNode("button",{type:"button",class:"agentation-marker__tooltip-delete",title:"Delete annotation",onClick:h},[...E[1]||(E[1]=[e.createElementVNode("svg",{class:"agentation-marker__tooltip-delete-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])]),e.createElementVNode("p",Ce,e.toDisplayString(t.annotation.elementPath),1)]),e.createElementVNode("div",$e,[e.createElementVNode("p",Se,e.toDisplayString(t.annotation.comment),1),t.annotation.selectedText?(e.openBlock(),e.createElementBlock("p",Ae,' "'+e.toDisplayString(t.annotation.selectedText)+'" ',1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ne,e.toDisplayString(new Date(t.annotation.timestamp).toLocaleString()),1)],2)):e.createCommentVNode("",!0)]),_:1})],38))}}),[["__scopeId","data-v-28a8338d"]]),Be="agentation-annotations-",W="agentation-settings",Ve=7;function _(t){return`${Be}${t}`}function T(){if(typeof window>"u")return"/";const t=window.location.hash;return t&&t.startsWith("#/")?t.slice(1):window.location.pathname}function D(t){if(typeof window>"u")return[];try{const n=localStorage.getItem(_(t));if(!n)return[];const o=JSON.parse(n),a=Date.now()-Ve*24*60*60*1e3;return o.filter(i=>!i.timestamp||i.timestamp>a)}catch{return[]}}function P(t,n){if(!(typeof window>"u"))try{localStorage.setItem(_(t),JSON.stringify(n))}catch{}}function O(t){if(!(typeof window>"u"))try{localStorage.removeItem(_(t))}catch{}}function _e(){if(typeof window>"u")return null;try{const t=localStorage.getItem(W);return t?JSON.parse(t):null}catch{return null}}function Te(t){if(!(typeof window>"u"))try{localStorage.setItem(W,JSON.stringify(t))}catch{}}function U(){if(typeof window>"u")return null;try{const t=localStorage.getItem("agentation-theme");return t==="light"||t==="dark"?t:null}catch{return null}}function z(t){if(!(typeof window>"u"))try{localStorage.setItem("agentation-theme",t)}catch{}}let L=null;function Pe(){const t=e.ref([]),n=e.ref(null),o=e.ref(null),a=e.ref("");function i(l){a.value=l,t.value=D(l)}function c(l){a.value=l,t.value=D(l),n.value=null,o.value=null}function p(l,m){const x={id:crypto.randomUUID(),x:l.x,y:l.y,comment:m,element:l.element,elementPath:l.elementPath,timestamp:Date.now(),selectedText:l.selectedText,boundingBox:l.boundingBox,nearbyText:l.nearbyText,cssClasses:l.cssClasses,nearbyElements:l.nearbyElements,computedStyles:l.computedStyles,fullPath:l.fullPath,accessibility:l.accessibility,isFixed:l.isFixed};return t.value=[...t.value,x],P(a.value,t.value),n.value=null,x}function w(l){const m=t.value.find(x=>x.id===l);return m?(t.value=t.value.filter(x=>x.id!==l),P(a.value,t.value),m):null}function h(l,m){const x=t.value.findIndex(S=>S.id===l);if(x===-1)return null;const C={...t.value[x],comment:m};return t.value=[...t.value.slice(0,x),C,...t.value.slice(x+1)],P(a.value,t.value),o.value=null,C}function $(){t.value=[],O(a.value)}function s(l){n.value=l}function u(l){o.value=l}function E(l){return t.value.find(m=>m.id===l)}function b(l){return t.value.findIndex(m=>m.id===l)}const y=e.computed(()=>t.value.length),g=e.computed(()=>t.value.length===0);return{annotations:e.readonly(t),pendingAnnotation:e.readonly(n),editingAnnotationId:e.readonly(o),count:y,isEmpty:g,initialize:i,switchPath:c,add:p,remove:w,update:h,clear:$,setPending:s,setEditing:u,getById:E,getIndex:b}}function q(){return L||(L=Pe()),L}function Le(){L=null}function G(t,n=3){const o=[];let a=t,i=0;for(;a&&a!==document.body&&i<n;){let c=a.tagName.toLowerCase();if(a.id)c+=`#${a.id}`;else if(a.classList.length>0){const p=Array.from(a.classList).find(w=>!w.match(/^_/)&&!w.match(/[A-Za-z]+_[a-z0-9]{5,}/));p&&(c+=`.${p}`)}o.unshift(c),a=a.parentElement,i++}return o.join(" > ")}function K(t){const n=[];let o=t;for(;o&&o!==document.documentElement;){let a=o.tagName.toLowerCase();if(o.id)a+=`#${o.id}`;else{const i=o.parentElement;if(i){const c=Array.from(i.children).filter(p=>p.tagName===o.tagName);if(c.length>1){const p=c.indexOf(o)+1;a+=`:nth-of-type(${p})`}}}n.unshift(a),o=o.parentElement}return n.join(" > ")}function v(t){var a,i,c,p,w,h,$;const n=G(t),o=t.tagName.toLowerCase();if(t instanceof SVGElement||t.closest("svg")){const s=t.closest("svg"),u=(a=s==null?void 0:s.querySelector("title"))==null?void 0:a.textContent,E=s==null?void 0:s.getAttribute("aria-label");return{name:u||E||"SVG graphic",path:n}}if(o==="button"||t.getAttribute("role")==="button")return{name:`Button: "${((i=t.textContent)==null?void 0:i.trim().slice(0,30))||t.getAttribute("aria-label")||"Button"}"`,path:n};if(o==="a")return{name:`Link: "${((c=t.textContent)==null?void 0:c.trim().slice(0,30))||t.getAttribute("aria-label")||"Link"}"`,path:n};if(o==="input"||o==="textarea"||o==="select"){const s=t.type||o,u=t.getAttribute("aria-label")||t.getAttribute("placeholder")||((w=(p=document.querySelector(`label[for="${t.id}"]`))==null?void 0:p.textContent)==null?void 0:w.trim());return{name:u?`${s}: "${u}"`:`${s} field`,path:n}}if(/^h[1-6]$/.test(o)){const s=(h=t.textContent)==null?void 0:h.trim().slice(0,40);return{name:s?`${o}: "${s}"`:o,path:n}}if(o==="p"){const s=($=t.textContent)==null?void 0:$.trim();return s&&s.length>0?{name:`Paragraph: "${s.slice(0,40)+(s.length>40?"...":"")}"`,path:n}:{name:"Paragraph",path:n}}if(o==="img"){const s=t.alt;return{name:s?`Image: "${s}"`:"Image",path:n}}if(o==="li")return{name:"List item",path:n};if(t.classList.length>0){const s=Array.from(t.classList).find(u=>!(u.match(/^_[a-zA-Z0-9]+$/)||u.match(/[A-Za-z]+_[a-z0-9]{5,}$/)));if(s)return{name:`${o}.${s}`,path:n}}if(["nav","header","footer","main","section","article"].includes(o)){const s=t.getAttribute("aria-label");if(s)return{name:`${o}: "${s}"`,path:n}}return{name:o,path:n}}function Me(t){var a;const n=t.tagName.toLowerCase();if(t instanceof SVGElement||t.closest("svg"))return"icon";if(n==="button"||t.getAttribute("role")==="button")return"button";const o=((a=t.className)==null?void 0:a.toString())||"";return o.includes("spinner")||o.includes("loader")||o.includes("loading")?"spinner":n}function Y(t){var c,p,w;const n=[],o=t.previousElementSibling;if(o){const h=(c=o.textContent)==null?void 0:c.trim();h&&h.length<100&&n.push(`[prev]: ${h.slice(0,50)}`)}const a=(p=t.textContent)==null?void 0:p.trim();a&&a.length<200&&n.push(a.slice(0,80));const i=t.nextElementSibling;if(i){const h=(w=i.textContent)==null?void 0:w.trim();h&&h.length<100&&n.push(`[next]: ${h.slice(0,50)}`)}return n.join(" | ")}function Z(t){const n=[],o=t.parentElement;o&&o!==document.body&&n.push(`parent: ${o.tagName.toLowerCase()}`);const a=t.previousElementSibling;a&&n.push(`prev: ${a.tagName.toLowerCase()}`);const i=t.nextElementSibling;i&&n.push(`next: ${i.tagName.toLowerCase()}`);const c=t.children.length;return c>0&&n.push(`children: ${c}`),n.join(", ")}function J(t){return!t.classList||t.classList.length===0?"":Array.from(t.classList).filter(n=>!(n.match(/^_[a-zA-Z0-9]+$/)||n.match(/[A-Za-z]+_[a-z0-9]{5,}$/))).join(" ")}function X(t){const n=window.getComputedStyle(t),o=t.tagName.toLowerCase(),a=[];return a.push(`display: ${n.display}`),a.push(`position: ${n.position}`),["p","span","h1","h2","h3","h4","h5","h6","a","button"].includes(o)&&(a.push(`font-size: ${n.fontSize}`),a.push(`font-weight: ${n.fontWeight}`),a.push(`color: ${n.color}`),a.push(`line-height: ${n.lineHeight}`)),["div","section","article","main","nav","header","footer"].includes(o)&&(a.push(`width: ${n.width}`),a.push(`height: ${n.height}`),a.push(`padding: ${n.padding}`),a.push(`margin: ${n.margin}`),(n.display==="flex"||n.display==="inline-flex")&&(a.push(`flex-direction: ${n.flexDirection}`),a.push(`justify-content: ${n.justifyContent}`),a.push(`align-items: ${n.alignItems}`),a.push(`gap: ${n.gap}`)),(n.display==="grid"||n.display==="inline-grid")&&(a.push(`grid-template-columns: ${n.gridTemplateColumns}`),a.push(`grid-template-rows: ${n.gridTemplateRows}`),a.push(`gap: ${n.gap}`))),n.backgroundColor!=="rgba(0, 0, 0, 0)"&&a.push(`background-color: ${n.backgroundColor}`),n.borderWidth!=="0px"&&a.push(`border: ${n.border}`),n.borderRadius!=="0px"&&a.push(`border-radius: ${n.borderRadius}`),a.join("; ")}function De(t){const n=window.getComputedStyle(t);return["display","position","top","right","bottom","left","width","height","min-width","min-height","max-width","max-height","padding","margin","border","border-radius","background","background-color","color","font-family","font-size","font-weight","line-height","text-align","flex-direction","justify-content","align-items","gap","grid-template-columns","grid-template-rows","overflow","z-index","opacity","transform","transition","animation"].map(a=>{const i=n.getPropertyValue(a);return i&&i!=="none"&&i!=="normal"&&i!=="auto"?`${a}: ${i}`:null}).filter(Boolean).join("; ")}function Q(t){const n=[],o=t.getAttribute("role");o&&n.push(`role="${o}"`);const a=Array.from(t.attributes).filter(p=>p.name.startsWith("aria-")).map(p=>`${p.name}="${p.value}"`).join(" ");a&&n.push(a);const i=t.getAttribute("tabindex");return i!==null&&n.push(`tabindex="${i}"`),["a","button","input","textarea","select"].includes(t.tagName.toLowerCase())&&n.push("focusable"),n.join(" ")}function ee(t){let n=t;for(;n&&n!==document.body;){const o=window.getComputedStyle(n).position;if(o==="fixed"||o==="sticky")return!0;n=n.parentElement}return!1}function te(t){const n=e.ref(!1),o=e.ref(null),a=e.ref(null),i=e.ref(null),c="[data-agentation-ignore]";function p(b){return!!(b.closest(c)||b===document.body||b===document.documentElement)}function w(b){var g,l;const y=b.target;if(p(y)){o.value=null,a.value=null,i.value=null,(g=t.onHoverChange)==null||g.call(t,null);return}if(y!==o.value){o.value=y;const m=y.getBoundingClientRect();a.value=m;const{name:x,path:C}=v(y),S={element:y,name:x,path:C,rect:m};i.value=S,(l=t.onHoverChange)==null||l.call(t,S)}}function h(b){b.preventDefault(),b.stopPropagation();const y=b.target;if(p(y))return;const{name:g,path:l}=v(y),m=y.getBoundingClientRect(),x=window.innerWidth,C=window.scrollY,S=ee(y),B={x:(m.left+m.width/2)/x*100,y:S?m.top+m.height/2:m.top+m.height/2+C,element:g,elementPath:l,boundingBox:{x:m.left,y:m.top,width:m.width,height:m.height},nearbyText:Y(y),nearbyElements:Z(y),cssClasses:J(y),computedStyles:X(y),fullPath:K(y),accessibility:Q(y),isFixed:S};u(),t.onSelect(B,y)}function $(b){b.key==="Escape"&&u()}function s(){n.value||(n.value=!0,document.addEventListener("mousemove",w,{capture:!0}),document.addEventListener("click",h,{capture:!0}),document.addEventListener("keydown",$),document.body.style.cursor="crosshair")}function u(){var b;n.value&&(n.value=!1,o.value=null,a.value=null,i.value=null,document.removeEventListener("mousemove",w,{capture:!0}),document.removeEventListener("click",h,{capture:!0}),document.removeEventListener("keydown",$),document.body.style.cursor="",(b=t.onHoverChange)==null||b.call(t,null))}function E(){n.value?u():s()}return e.onUnmounted(()=>{n.value&&u()}),{isActive:e.readonly(n),hoveredElement:e.readonly(o),highlightBox:e.readonly(a),elementInfo:e.readonly(i),start:s,stop:u,toggle:E}}const ze="agentation-animation-freeze",I="--agentation-animation-state";function ne(){const t=e.ref(!1);let n=null;function o(){t.value||(document.documentElement.style.setProperty(I,"paused"),n||(n=document.createElement("style"),n.id=ze,n.textContent=`
        *,
        *::before,
        *::after {
          animation-play-state: var(${I}, running) !important;
        }
      `,document.head.appendChild(n)),document.querySelectorAll("video").forEach(c=>{c.paused||(c.dataset.agentationWasPlaying="true",c.pause())}),t.value=!0)}function a(){t.value&&(document.documentElement.style.removeProperty(I),n&&n.parentNode&&(n.parentNode.removeChild(n),n=null),document.querySelectorAll("video[data-agentation-was-playing]").forEach(c=>{delete c.dataset.agentationWasPlaying,c.play().catch(()=>{})}),t.value=!1)}function i(){t.value?a():o()}return e.onUnmounted(()=>{t.value&&a()}),{isPaused:e.readonly(t),pause:o,resume:a,toggle:i}}function oe(){const t=e.ref(!1);function n(){const i=U();i?t.value=i==="dark":typeof window<"u"&&(t.value=window.matchMedia("(prefers-color-scheme: dark)").matches)}function o(){t.value=!t.value,z(t.value?"dark":"light")}function a(i){t.value=i,z(i?"dark":"light")}return e.onMounted(()=>{n()}),{isDark:e.readonly(t),toggle:o,set:a,initialize:n}}function ae(t,n="standard"){if(t.length===0)return"No annotations to display.";const o=["# Page Annotations","",`Generated: ${new Date().toISOString()}`,`URL: ${typeof window<"u"?window.location.href:"N/A"}`,"","---",""];return t.forEach((a,i)=>{if(o.push(`## ${i+1}. ${a.element}`),o.push(""),o.push(`**Comment:** ${a.comment}`),o.push(""),o.push(`**Selector:** \`${a.elementPath}\``),o.push(""),o.push(`**Position:** x=${a.x.toFixed(1)}%, y=${a.y.toFixed(0)}px`),o.push(""),a.selectedText&&(o.push(`**Selected Text:** "${a.selectedText}"`),o.push("")),a.boundingBox){const c=a.boundingBox;o.push(`**Bounding Box:** x=${c.x.toFixed(0)}, y=${c.y.toFixed(0)}, w=${c.width.toFixed(0)}, h=${c.height.toFixed(0)}`),o.push("")}n!=="compact"&&(a.nearbyText&&(o.push(`**Nearby Text:** ${a.nearbyText}`),o.push("")),a.cssClasses&&(o.push(`**CSS Classes:** \`${a.cssClasses}\``),o.push(""))),(n==="detailed"||n==="forensic")&&(a.nearbyElements&&(o.push(`**Nearby Elements:** ${a.nearbyElements}`),o.push("")),a.accessibility&&(o.push(`**Accessibility:** ${a.accessibility}`),o.push(""))),n==="forensic"&&(a.fullPath&&(o.push(`**Full Path:** \`${a.fullPath}\``),o.push("")),a.computedStyles&&(o.push("**Computed Styles:**"),o.push("```css"),o.push(a.computedStyles),o.push("```"),o.push(""))),o.push("---"),o.push("")}),o.join(`
`)}function ve(t){return[`[${t.element}]`,t.comment,`(${t.elementPath})`].join(" ")}const Ie=["aria-pressed"],Fe=["aria-pressed","title"],je={key:0,class:"agentation-toolbar__icon",fill:"currentColor",viewBox:"0 0 24 24"},He={key:1,class:"agentation-toolbar__icon",fill:"currentColor",viewBox:"0 0 24 24"},Re=["disabled","title"],We={key:0,class:"agentation-toolbar__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={key:1,class:"agentation-toolbar__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ue={key:2,class:"agentation-toolbar__badge"},qe=["disabled"],Ge=["title"],Ke={key:0,class:"agentation-toolbar__icon",fill:"currentColor",viewBox:"0 0 24 24"},Ye={key:1,class:"agentation-toolbar__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ze={style:{position:"absolute",inset:"0","z-index":"99998","pointer-events":"none"},"data-agentation-ignore":""},F="#3b82f6",Je=e.defineComponent({__name:"Agentation",props:{demoAnnotations:{},demoDelay:{default:1e3},enableDemoMode:{type:Boolean,default:!1},copyToClipboard:{type:Boolean,default:!0},onAnnotationAdd:{type:Function},onAnnotationDelete:{type:Function},onAnnotationUpdate:{type:Function},onAnnotationsClear:{type:Function},onCopy:{type:Function}},setup(t){const{annotations:n,pendingAnnotation:o,count:a,isEmpty:i,initialize:c,switchPath:p,add:w,remove:h,clear:$,setPending:s}=q(),{isPaused:u,toggle:E}=ne(),{isDark:b,toggle:y}=oe(),g=e.ref(!1),l=e.ref(null),m=e.ref(!1),x=e.computed(()=>o.value?o.value.x/100*(typeof window<"u"?window.innerWidth:0):0),C=e.computed(()=>{if(!o.value)return 0;const k=typeof window<"u"?window.scrollY:0;return o.value.isFixed?o.value.y:o.value.y-k}),S=e.computed(()=>{if(!N.value)return{showBelow:!1,showLeft:!1};const k=32,r=8,f=typeof window<"u"?window.innerWidth:1e3,A=N.value.top<k+r,H=N.value.left>f-200;return{showBelow:A,showLeft:H}}),{isActive:B,highlightBox:N,elementInfo:ie,toggle:le}=te({onSelect:k=>{s(k),g.value=!0},onHoverChange:()=>{}}),j=e.ref(T());let V=null;function Xe(){const k=T();k!==j.value&&(j.value=k,p(k))}function re(){Xe(),V=requestAnimationFrame(re)}e.onMounted(()=>{var k;if(typeof window<"u"){const r=T();j.value=r,c(r),V=requestAnimationFrame(re),t.enableDemoMode&&((k=t.demoAnnotations)!=null&&k.length)&&setTimeout(()=>{t.demoAnnotations.forEach((f,A)=>{setTimeout(()=>{w({x:f.x,y:f.y,element:f.element,elementPath:f.elementPath},`Demo annotation ${A+1}`)},A*300)})},t.demoDelay)}}),e.onUnmounted(()=>{V!==null&&(cancelAnimationFrame(V),V=null)});function Qe(k){var f;if(!o.value)return;const r=w(o.value,k);g.value=!1,(f=t.onAnnotationAdd)==null||f.call(t,r)}function et(){g.value=!1,s(null)}function se(k){var f;const r=h(k.id);r&&((f=t.onAnnotationDelete)==null||f.call(t,r))}function tt(){var k;n.value.length!==0&&confirm("Clear all annotations?")&&($(),(k=t.onAnnotationsClear)==null||k.call(t))}async function nt(){var r;const k=ae([...n.value]);if(t.copyToClipboard)try{await navigator.clipboard.writeText(k),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch{console.log(k)}(r=t.onCopy)==null||r.call(t,k)}function ce(k){console.log("Marker clicked:",k)}return(k,r)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{class:e.normalizeClass(["agentation-toolbar",e.unref(b)?"agentation-toolbar--dark":""]),"data-agentation-ignore":"",role:"toolbar","aria-label":"Agentation annotation tools"},[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["agentation-toolbar__button",e.unref(B)&&"agentation-toolbar__button--active"]),"aria-pressed":e.unref(B),title:"Select element to annotate",onClick:r[0]||(r[0]=(...f)=>e.unref(le)&&e.unref(le)(...f))},[...r[5]||(r[5]=[e.createElementVNode("svg",{class:"agentation-toolbar__icon",fill:"currentColor",viewBox:"0 0 24 24"},[e.createElementVNode("path",{d:"M4 4l7.07 17 2.51-7.39L21 11.07 4 4zm9.33 8.33l-1.62 4.79L6.27 6.27l10.85 5.06-3.79 1z"})],-1)])],10,Ie),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["agentation-toolbar__button",e.unref(u)&&"agentation-toolbar__button--paused"]),"aria-pressed":e.unref(u),title:e.unref(u)?"Resume animations":"Pause animations",onClick:r[1]||(r[1]=(...f)=>e.unref(E)&&e.unref(E)(...f))},[e.unref(u)?(e.openBlock(),e.createElementBlock("svg",je,[...r[6]||(r[6]=[e.createElementVNode("path",{d:"M8 5v14l11-7z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",He,[...r[7]||(r[7]=[e.createElementVNode("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"},null,-1)])]))],10,Fe),r[13]||(r[13]=e.createElementVNode("div",{class:"agentation-toolbar__divider"},null,-1)),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["agentation-toolbar__button",m.value&&"agentation-toolbar__button--success"]),disabled:e.unref(i),title:`Copy ${e.unref(a)} annotation(s) as markdown`,onClick:nt},[m.value?(e.openBlock(),e.createElementBlock("svg",We,[...r[8]||(r[8]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Oe,[...r[9]||(r[9]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),e.unref(a)>0?(e.openBlock(),e.createElementBlock("span",Ue,e.toDisplayString(e.unref(a)),1)):e.createCommentVNode("",!0)],10,Re),e.createElementVNode("button",{type:"button",class:"agentation-toolbar__button",disabled:e.unref(i),title:"Clear all annotations",onClick:tt},[...r[10]||(r[10]=[e.createElementVNode("svg",{class:"agentation-toolbar__icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,qe),r[14]||(r[14]=e.createElementVNode("div",{class:"agentation-toolbar__divider"},null,-1)),e.createElementVNode("button",{type:"button",class:"agentation-toolbar__button",title:e.unref(b)?"Switch to light mode":"Switch to dark mode",onClick:r[2]||(r[2]=(...f)=>e.unref(y)&&e.unref(y)(...f))},[e.unref(b)?(e.openBlock(),e.createElementBlock("svg",Ke,[...r[11]||(r[11]=[e.createElementVNode("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ye,[...r[12]||(r[12]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])]))],8,Ge)],2),e.unref(B)&&e.unref(N)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"agentation-highlight",style:e.normalizeStyle({left:`${e.unref(N).left}px`,top:`${e.unref(N).top}px`,width:`${e.unref(N).width}px`,height:`${e.unref(N).height}px`}),"data-agentation-ignore":""},[e.unref(ie)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["agentation-highlight__tooltip",[S.value.showBelow?"agentation-highlight__tooltip--bottom":"agentation-highlight__tooltip--top",S.value.showLeft?"agentation-highlight__tooltip--top-right":""]])},e.toDisplayString(e.unref(ie).name),3)):e.createCommentVNode("",!0)],4)):e.createCommentVNode("",!0),e.createElementVNode("div",Ze,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n).filter(f=>!f.isFixed),(f,A)=>(e.openBlock(),e.createBlock(M,{key:f.id,annotation:f,index:A,dark:e.unref(b),"accent-color":F,"is-hovered":l.value===f.id,style:{"pointer-events":"auto"},onClick:ce,onDelete:se,onMouseenter:H=>l.value=f.id,onMouseleave:r[3]||(r[3]=H=>l.value=null)},null,8,["annotation","index","dark","is-hovered","onMouseenter"]))),128))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n).filter(f=>f.isFixed),f=>(e.openBlock(),e.createBlock(M,{key:f.id,annotation:f,index:e.unref(n).findIndex(A=>A.id===f.id),dark:e.unref(b),"accent-color":F,"is-hovered":l.value===f.id,onClick:ce,onDelete:se,onMouseenter:A=>l.value=f.id,onMouseleave:r[4]||(r[4]=A=>l.value=null)},null,8,["annotation","index","dark","is-hovered","onMouseenter"]))),128)),g.value&&e.unref(o)?(e.openBlock(),e.createBlock(R,{key:1,element:e.unref(o).element,x:x.value,y:C.value,"selected-text":e.unref(o).selectedText,"computed-styles":e.unref(o).computedStyles,dark:e.unref(b),"accent-color":F,onSubmit:Qe,onCancel:et},null,8,["element","x","y","selected-text","computed-styles","dark"])):e.createCommentVNode("",!0)]))}});d.Agentation=Je,d.AnnotationMarker=M,d.AnnotationPopup=R,d.clearAnnotations=O,d.generateAnnotationSummary=ve,d.generateMarkdown=ae,d.getAccessibilityInfo=Q,d.getCurrentRoutePath=T,d.getDetailedComputedStyles=X,d.getElementClasses=J,d.getElementPath=G,d.getForensicComputedStyles=De,d.getFullElementPath=K,d.getNearbyElements=Z,d.getNearbyText=Y,d.getStorageKey=_,d.identifyAnimationElement=Me,d.identifyElement=v,d.isElementFixed=ee,d.loadAnnotations=D,d.loadSettings=_e,d.loadTheme=U,d.resetAnnotations=Le,d.saveAnnotations=P,d.saveSettings=Te,d.saveTheme=z,d.useAnimationPause=ne,d.useAnnotations=q,d.useElementSelection=te,d.useTheme=oe,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})}));
